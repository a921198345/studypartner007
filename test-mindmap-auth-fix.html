<!DOCTYPE html>
<html>
<head>
    <title>æµ‹è¯•çŸ¥è¯†å¯¼å›¾è®¤è¯ä¿®å¤</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>çŸ¥è¯†å¯¼å›¾è®¤è¯é—®é¢˜ä¿®å¤æµ‹è¯•</h1>
    
    <h2>é—®é¢˜åˆ†æï¼š</h2>
    <ul>
        <li>âŒ API è¦æ±‚å¼ºåˆ¶è®¤è¯ï¼Œä½†å‰ç«¯æ²¡æœ‰å‘é€è®¤è¯ header</li>
        <li>âŒ å¯¼è‡´ 401 Unauthorized é”™è¯¯</li>
        <li>âŒ runtime.lastError æ˜¯æµè§ˆå™¨æ‰©å±•é—®é¢˜ï¼Œå¯å¿½ç•¥</li>
    </ul>
    
    <h2>ä¿®å¤æ–¹æ¡ˆï¼š</h2>
    <ul>
        <li>âœ… å°† API è®¤è¯æ”¹ä¸ºå¯é€‰ï¼ˆæœªç™»å½•ç”¨æˆ·å¯è®¿é—®æ°‘æ³•ï¼‰</li>
        <li>âœ… ä¿æŒä¼šå‘˜æƒé™é™åˆ¶ï¼ˆéä¼šå‘˜åªèƒ½çœ‹æ°‘æ³•ï¼‰</li>
        <li>âœ… ä¼˜é›…å¤„ç†è®¤è¯å¤±è´¥æƒ…å†µ</li>
    </ul>
    
    <h2>æµ‹è¯•æ–¹æ³•ï¼š</h2>
    <ol>
        <li>åœ¨æœªç™»å½•çŠ¶æ€ä¸‹è®¿é—® <a href="http://localhost:3000/knowledge-map?subject=æ°‘æ³•" target="_blank">æ°‘æ³•çŸ¥è¯†å¯¼å›¾</a></li>
        <li>æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ 401 é”™è¯¯</li>
        <li>æ£€æŸ¥æ°‘æ³•çŸ¥è¯†å¯¼å›¾æ˜¯å¦æ­£å¸¸æ˜¾ç¤º</li>
        <li>å°è¯•è®¿é—®å…¶ä»–å­¦ç§‘ï¼ˆåº”è¯¥æ˜¾ç¤ºä¼šå‘˜æç¤ºï¼‰</li>
    </ol>
    
    <div id="test-result" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;">
        <p>æµ‹è¯•ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</p>
    </div>
    
    <script>
        // æµ‹è¯•APIè°ƒç”¨
        async function testMindMapAPI() {
            const resultDiv = document.getElementById('test-result');
            resultDiv.innerHTML = '<p>ğŸ”„ æ­£åœ¨æµ‹è¯•APIè°ƒç”¨...</p>';
            
            try {
                const response = await fetch('/api/mindmaps/æ°‘æ³•');
                const data = await response.json();
                
                if (response.ok && data.success) {
                    resultDiv.innerHTML = `
                        <h3 style="color: green;">âœ… API è°ƒç”¨æˆåŠŸï¼</h3>
                        <p>çŠ¶æ€ç : ${response.status}</p>
                        <p>æ•°æ®ç»“æ„: ${data.mindmap ? 'æ­£ç¡®' : 'é”™è¯¯'}</p>
                        <p>è®¤è¯é—®é¢˜å·²ä¿®å¤ âœ…</p>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <h3 style="color: red;">âŒ API è°ƒç”¨å¤±è´¥</h3>
                        <p>çŠ¶æ€ç : ${response.status}</p>
                        <p>é”™è¯¯ä¿¡æ¯: ${data.message || 'æœªçŸ¥é”™è¯¯'}</p>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <h3 style="color: red;">âŒ è¯·æ±‚å¤±è´¥</h3>
                    <p>é”™è¯¯: ${error.message}</p>
                `;
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', () => {
            setTimeout(testMindMapAPI, 1000);
        });
    </script>
    
    <button onclick="testMindMapAPI()" style="margin-top: 10px; padding: 8px 16px; background: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer;">
        æ‰‹åŠ¨æµ‹è¯• API
    </button>
</body>
</html>